import { useState, useEffect, useCallback } from 'react';

type Locale = 'en' | 'ru' | 'uk' | 'de' | 'pl';

const translations = {
  en: {
    'subtitle': 'Find the perfect Java for your game',
    'tabs.main': 'Main',
    'tabs.launchers': 'Launchers',
    'tabs.compatibility': 'Compatibility',
    'tabs.author': 'Author',
    'compatibility.title': 'Compatibility Table',
    'compatibility.description': 'Minecraft version compatibility with Java',
    'compatibility.minecraft': 'Minecraft',
    'compatibility.java': 'Java',
    'compatibility.frameworks': 'Frameworks',
    'compatibility.notes': 'Notes',
    'footer.made_by': 'Made with',
    'footer.by': 'by',
    'selector.title': 'Java Selection for Minecraft',
    'selector.description': 'Choose parameters to get a recommendation',
    'selector.minecraft_version': 'Minecraft Version',
    'selector.search_version': 'Search version...',
    'selector.select_version': 'Select version',
    'selector.frameworks': 'Mods/Frameworks',
    'selector.operating_system': 'Operating System',
    'selector.get_recommendation': 'Get Recommendation',
    'os.detected': 'Detected OS: {{os}}. You can change if needed.',
    'os.warning': 'Switching to another OS may slightly change recommendation results.',
    'filters.all': 'All',
    'filters.release': 'Release',
    'filters.snapshot': 'Snapshots',
    'filters.beta': 'Beta',
    'filters.alpha': 'Alpha',
    'frameworks.vanilla': 'Vanilla',
    'frameworks.forge': 'Forge',
    'frameworks.fabric': 'Fabric',
    'frameworks.neoforge': 'NeoForge',
    'frameworks.optifine': 'OptiFine',
    'frameworks.quilt': 'Quilt',
    'frameworks.other': 'Other',
    'frameworks.selected': 'Compatible mods selected: {{frameworks}}',
    'result.title': 'Recommendation ready!',
    'result.best_provider': 'Best provider for you',
    'result.alternative_providers': 'Alternative providers:',
    'result.launch_command': 'Launch Command',
    'result.warnings': 'Warnings',
    'errors.fill_all_fields': 'Please fill all fields',
    'errors.version_not_found': 'Version not found',
    'success.recommendation_generated': 'Recommendation generated!',
    'success.command_copied': 'Command copied!',
    'loading.text': 'Loading Java Selector...',
    'launchers.title': 'Minecraft Launchers',
    'launchers.coming_soon': 'Launcher recommendations will appear here soon',
    'launchers.in_development': 'In Development',
    'launchers.what_coming': 'What will be added:',
    'launchers.feature_1': 'Official launcher recommendations',
    'launchers.feature_2': 'Third-party launchers (MultiMC, Prism, etc.)',
    'launchers.feature_3': 'Performance settings',
    'launchers.feature_4': 'Automatic mod installation',
    'launchers.current_message': 'Currently we cannot recommend specific launchers, but this feature will be added soon.',
    'author.location': 'Kamenskoe, Ukraine',
    'author.role': 'Fullstack Developer',
    'author.about': 'About me',
    'author.description': 'Developer with a passion for creating useful tools. I specialize in web technologies and cloud solutions. I create projects that solve real user problems.',
    'author.technologies': 'Technologies',
    'author.links': 'Links',
    'author.stats.projects': 'Projects',
    'author.stats.languages': 'Languages', 
    'author.stats.experience': 'Years of Experience',
    'project.title': 'About JSF Project',
    'project.subtitle': 'Java Selector for Minecraft - a tool for selecting optimal Java',
    'project.motivation_title': 'Motivation',
    'project.motivation': 'Simplify the Java selection process for Minecraft players, eliminating the need to understand version compatibility.',
    'project.features_title': 'Features',
    'project.feature_1': 'Automatic Java selection',
    'project.feature_2': 'Support for all popular mods',
    'project.feature_3': 'Operating system detection',
    'project.feature_4': 'Multilingual interface',
    'project.open_source': 'Open source project',
    'project.view_source': 'View code',
    'aiDescription': 'Ask questions about Java versions, Minecraft compatibility, or get help with your setup',
    'apiKeySetup': 'API Key Required',
    'apiKeyDescription': 'To use AI features, you need to set up a Gemini API key from',
    'startConversation': 'Start a conversation with AI',
    'exampleQuestions': 'Ask about Java versions, compatibility issues, or setup help',
    'askQuestion': 'Type your question here...',
    'enterToSend': 'Press Enter to send',
    'sending': 'Sending...',
    'send': 'Send',
    'error': 'Error',
    'aiError': 'Failed to get AI response. Please try again.',
    'microphoneError': 'Failed to access microphone. Please check permissions.'
  },
  ru: {
    'subtitle': 'Найдите идеальную Java для вашей игры',
    'tabs.main': 'Главная',
    'tabs.launchers': 'Лаунчеры',
    'tabs.compatibility': 'Совместимость',
    'tabs.author': 'Автор',
    'compatibility.title': 'Таблица совместимости',
    'compatibility.description': 'Совместимость версий Minecraft с Java',
    'compatibility.minecraft': 'Minecraft',
    'compatibility.java': 'Java',
    'compatibility.frameworks': 'Фреймворки',
    'compatibility.notes': 'Примечания',
    'footer.made_by': 'Создано с',
    'footer.by': 'от',
    'selector.title': 'Подбор Java для Minecraft',
    'selector.description': 'Выберите параметры для получения рекомендации',
    'selector.minecraft_version': 'Версия Minecraft',
    'selector.search_version': 'Поиск версии...',
    'selector.select_version': 'Выберите версию',
    'selector.frameworks': 'Моды/Фреймворки',
    'selector.operating_system': 'Операционная система',
    'selector.get_recommendation': 'Получить рекомендацию',
    'os.detected': 'Определена ОС: {{os}}. Можете изменить при необходимости.',
    'os.warning': 'Переход на другую ОС может немного изменить результаты рекомендации.',
    'filters.all': 'Все',
    'filters.release': 'Релиз',
    'filters.snapshot': 'Снапшоты',
    'filters.beta': 'Бета',
    'filters.alpha': 'Альфа',
    'frameworks.vanilla': 'Vanilla',
    'frameworks.forge': 'Forge',
    'frameworks.fabric': 'Fabric',
    'frameworks.neoforge': 'NeoForge',
    'frameworks.optifine': 'OptiFine',
    'frameworks.quilt': 'Quilt',
    'frameworks.other': 'Другое',
    'frameworks.selected': 'Выбрано совместимых модов: {{frameworks}}',
    'result.title': 'Рекомендация готова!',
    'result.best_provider': 'Лучший провайдер для вас',
    'result.alternative_providers': 'Альтернативные провайдеры:',
    'result.launch_command': 'Команда запуска',
    'result.warnings': 'Предупреждения',
    'errors.fill_all_fields': 'Пожалуйста, заполните все поля',
    'errors.version_not_found': 'Версия не найдена',
    'success.recommendation_generated': 'Рекомендация сгенерирована!',
    'success.command_copied': 'Команда скопирована!',
    'loading.text': 'Загрузка Java Selector...',
    'launchers.title': 'Лаунчеры Minecraft',
    'launchers.coming_soon': 'Скоро здесь появятся рекомендации лаунчеров',
    'launchers.in_development': 'В разработке',
    'launchers.what_coming': 'Что будет добавлено:',
    'launchers.feature_1': 'Рекомендации официальных лаунчеров',
    'launchers.feature_2': 'Сторонние лаунчеры (MultiMC, Prism, etc.)',
    'launchers.feature_3': 'Настройки производительности',
    'launchers.feature_4': 'Автоматическая установка модов',
    'launchers.current_message': 'В настоящее время мы не можем рекомендовать конкретные лаунчеры, но эта функция будет добавлена в ближайшее время.',
    'author.location': 'Каменское, Украина',
    'author.role': 'Fullstack разработчик',
    'author.about': 'Обо мне',
    'author.description': 'Разработчик с страстью к созданию полезных инструментов. Специализируюсь на веб-технологиях и облачных решениях. Создаю проекты, которые решают реальные проблемы пользователей.',
    'author.technologies': 'Технологии',
    'author.links': 'Ссылки',
    'author.stats.projects': 'Проектов',
    'author.stats.languages': 'Языков',
    'author.stats.experience': 'Лет опыта',
    'project.title': 'О проекте JSF',
    'project.subtitle': 'Java Selector for Minecraft - инструмент для подбора оптимальной Java',
    'project.motivation_title': 'Мотивация',
    'project.motivation': 'Упростить процесс выбора Java для игроков в Minecraft, избавив от необходимости разбираться в совместимости версий.',
    'project.features_title': 'Возможности',
    'project.feature_1': 'Автоматический подбор Java',
    'project.feature_2': 'Поддержка всех популярных модов',
    'project.feature_3': 'Определение операционной системы',
    'project.feature_4': 'Мультиязычный интерфейс',
    'project.open_source': 'Проект с открытым исходным кодом',
    'project.view_source': 'Посмотреть код',
    'aiDescription': 'Задавайте вопросы о версиях Java, совместимости с Minecraft или получите помощь с настройкой',
    'apiKeySetup': 'Требуется API ключ',
    'apiKeyDescription': 'Для использования функций ИИ вам нужно настроить API ключ Gemini из',
    'startConversation': 'Начните разговор с ИИ',
    'exampleQuestions': 'Спрашивайте о версиях Java, проблемах совместимости или помощи с настройкой',
    'askQuestion': 'Введите ваш вопрос здесь...',
    'enterToSend': 'Нажмите Enter для отправки',
    'sending': 'Отправка...',
    'send': 'Отправить',
    'error': 'Ошибка',
    'aiError': 'Не удалось получить ответ от ИИ. Пожалуйста, попробуйте снова.',
    'microphoneError': 'Не удалось получить доступ к микрофону. Проверьте разрешения.'
  },
  uk: {
    'subtitle': 'Знайдіть ідеальну Java для вашої гри',
    'tabs.main': 'Головна',
    'tabs.launchers': 'Лаунчери',
    'tabs.compatibility': 'Сумісність',
    'tabs.author': 'Автор',
    'compatibility.title': 'Таблиця сумісності',
    'compatibility.description': 'Сумісність версій Minecraft з Java',
    'compatibility.minecraft': 'Minecraft',
    'compatibility.java': 'Java',
    'compatibility.frameworks': 'Фреймворки',
    'compatibility.notes': 'Примітки',
    'footer.made_by': 'Створено з',
    'footer.by': 'від',
    'selector.title': 'Підбір Java для Minecraft',
    'selector.description': 'Виберіть параметри для отримання рекомендації',
    'selector.minecraft_version': 'Версія Minecraft',
    'selector.search_version': 'Пошук версії...',
    'selector.select_version': 'Виберіть версію',
    'selector.frameworks': 'Моди/Фреймворки',
    'selector.operating_system': 'Операційна система',
    'selector.get_recommendation': 'Отримати рекомендацію',
    'os.detected': 'Визначена ОС: {{os}}. Можете змінити при необхідності.',
    'os.warning': 'Перехід на іншу ОС може трохи змінити результати рекомендації.',
    'filters.all': 'Всі',
    'filters.release': 'Реліз',
    'filters.snapshot': 'Снапшоти',
    'filters.beta': 'Бета',
    'filters.alpha': 'Альфа',
    'frameworks.vanilla': 'Vanilla',
    'frameworks.forge': 'Forge',
    'frameworks.fabric': 'Fabric',
    'frameworks.neoforge': 'NeoForge',
    'frameworks.optifine': 'OptiFine',
    'frameworks.quilt': 'Quilt',
    'frameworks.other': 'Інше',
    'frameworks.selected': 'Вибрано сумісних модів: {{frameworks}}',
    'result.title': 'Рекомендація готова!',
    'result.best_provider': 'Найкращий провайдер для вас',
    'result.alternative_providers': 'Альтернативні провайдери:',
    'result.launch_command': 'Команда запуску',
    'result.warnings': 'Попередження',
    'errors.fill_all_fields': 'Будь ласка, заповніть всі поля',
    'errors.version_not_found': 'Версія не знайдена',
    'success.recommendation_generated': 'Рекомендація згенерована!',
    'success.command_copied': 'Команда скопійована!',
    'loading.text': 'Завантаження Java Selector...',
    'launchers.title': 'Лаунчери Minecraft',
    'launchers.coming_soon': 'Скоро тут з\'являться рекомендації лаунчерів',
    'launchers.in_development': 'В розробці',
    'launchers.what_coming': 'Що буде додано:',
    'launchers.feature_1': 'Рекомендації офіційних лаунчерів',
    'launchers.feature_2': 'Сторонні лаунчери (MultiMC, Prism, etc.)',
    'launchers.feature_3': 'Налаштування продуктивності',
    'launchers.feature_4': 'Автоматичне встановлення модів',
    'launchers.current_message': 'В даний час ми не можемо рекомендувати конкретні лаунчери, але ця функція буде додана найближчим часом.',
    'author.location': 'Кам\'янське, Україна',
    'author.role': 'Fullstack розробник',
    'author.about': 'Про мене',
    'author.description': 'Розробник з пристрастю до створення корисних інструментів. Спеціалізуюся на веб-технологіях та хмарних рішеннях. Створюю проекти, які вирішують реальні проблеми користувачів.',
    'author.technologies': 'Технології',
    'author.links': 'Посилання',
    'author.stats.projects': 'Проектів',
    'author.stats.languages': 'Мов',
    'author.stats.experience': 'Років досвіду',
    'project.title': 'Про проект JSF',
    'project.subtitle': 'Java Selector for Minecraft - інструмент для підбору оптимальної Java',
    'project.motivation_title': 'Мотивація',
    'project.motivation': 'Спростити процес вибору Java для гравців у Minecraft, позбавивши від необхідності розбиратися в сумісності версій.',
    'project.features_title': 'Можливості',
    'project.feature_1': 'Автоматичний підбір Java',
    'project.feature_2': 'Підтримка всіх популярних модів',
    'project.feature_3': 'Визначення операційної системи',
    'project.feature_4': 'Багатомовний інтерфейс',
    'project.open_source': 'Проект з відкритим вихідним кодом',
    'project.view_source': 'Переглянути код',
    'aiDescription': 'Задавайте питання про версії Java, сумісність з Minecraft або отримайте допомогу з налаштуванням',
    'apiKeySetup': 'Потрібен API ключ',
    'apiKeyDescription': 'Для використання функцій ШІ вам потрібно налаштувати API ключ Gemini з',
    'startConversation': 'Почніть розмову з ШІ',
    'exampleQuestions': 'Запитуйте про версії Java, проблеми сумісності або допомогу з налаштуванням',
    'askQuestion': 'Введіть ваше питання тут...',
    'enterToSend': 'Натисніть Enter для відправки',
    'sending': 'Відправка...',
    'send': 'Відправити',
    'error': 'Помилка',
    'aiError': 'Не вдалося отримати відповідь від ШІ. Будь ласка, спробуйте знову.',
    'microphoneError': 'Не вдалося отримати доступ до мікрофону. Перевірте дозволи.'
  },
  de: {
    'subtitle': 'Finden Sie das perfekte Java für Ihr Spiel',
    'tabs.main': 'Hauptseite',
    'tabs.launchers': 'Launcher',
    'tabs.compatibility': 'Kompatibilität',
    'tabs.author': 'Autor',
    'compatibility.title': 'Kompatibilitätstabelle',
    'compatibility.description': 'Kompatibilität von Minecraft-Versionen mit Java',
    'compatibility.minecraft': 'Minecraft',
    'compatibility.java': 'Java',
    'compatibility.frameworks': 'Frameworks',
    'compatibility.notes': 'Anmerkungen',
    'footer.made_by': 'Erstellt mit',
    'footer.by': 'von',
    'selector.title': 'Java-Auswahl für Minecraft',
    'selector.description': 'Wählen Sie Parameter für eine Empfehlung',
    'selector.minecraft_version': 'Minecraft-Version',
    'selector.search_version': 'Version suchen...',
    'selector.select_version': 'Version auswählen',
    'selector.frameworks': 'Mods/Frameworks',
    'selector.operating_system': 'Betriebssystem',
    'selector.get_recommendation': 'Empfehlung erhalten',
    'os.detected': 'Erkanntes Betriebssystem: {{os}}. Sie können es bei Bedarf ändern.',
    'os.warning': 'Der Wechsel zu einem anderen Betriebssystem kann die Empfehlungsergebnisse leicht verändern.',
    'filters.all': 'Alle',
    'filters.release': 'Release',
    'filters.snapshot': 'Snapshots',
    'filters.beta': 'Beta',
    'filters.alpha': 'Alpha',
    'frameworks.vanilla': 'Vanilla',
    'frameworks.forge': 'Forge',
    'frameworks.fabric': 'Fabric',
    'frameworks.neoforge': 'NeoForge',
    'frameworks.optifine': 'OptiFine',
    'frameworks.quilt': 'Quilt',
    'frameworks.other': 'Andere',
    'frameworks.selected': 'Ausgewählte kompatible Mods: {{frameworks}}',
    'result.title': 'Empfehlung ist bereit!',
    'result.best_provider': 'Bester Anbieter für Sie',
    'result.alternative_providers': 'Alternative Anbieter:',
    'result.launch_command': 'Startbefehl',
    'result.warnings': 'Warnungen',
    'errors.fill_all_fields': 'Bitte füllen Sie alle Felder aus',
    'errors.version_not_found': 'Version nicht gefunden',
    'success.recommendation_generated': 'Empfehlung generiert!',
    'success.command_copied': 'Befehl kopiert!',
    'loading.text': 'Lade Java Selector...',
    'launchers.title': 'Minecraft-Launcher',
    'launchers.coming_soon': 'Launcher-Empfehlungen werden bald hier erscheinen',
    'launchers.in_development': 'In Entwicklung',
    'launchers.what_coming': 'Was hinzugefügt wird:',
    'launchers.feature_1': 'Empfehlungen für offizielle Launcher',
    'launchers.feature_2': 'Drittanbieter-Launcher (MultiMC, Prism, etc.)',
    'launchers.feature_3': 'Leistungseinstellungen',
    'launchers.feature_4': 'Automatische Mod-Installation',
    'launchers.current_message': 'Derzeit können wir keine spezifischen Launcher empfehlen, aber diese Funktion wird in Kürze hinzugefügt.',
    'author.location': 'Kamianske, Ukraine',
    'author.role': 'Fullstack-Entwickler',
    'author.about': 'Über mich',
    'author.description': 'Entwickler mit einer Leidenschaft für die Erstellung nützlicher Tools. Spezialisiert auf Web-Technologien und Cloud-Lösungen. Ich erstelle Projekte, die reale Benutzerprobleme lösen.',
    'author.technologies': 'Technologien',
    'author.links': 'Links',
    'author.stats.projects': 'Projekte',
    'author.stats.languages': 'Sprachen',
    'author.stats.experience': 'Jahre Erfahrung',
    'project.title': 'Über das JSF-Projekt',
    'project.subtitle': 'Java Selector for Minecraft - ein Tool zur Auswahl der optimalen Java-Version',
    'project.motivation_title': 'Motivation',
    'project.motivation': 'Den Prozess der Java-Auswahl für Minecraft-Spieler zu vereinfachen und die Notwendigkeit zu beseitigen, sich mit Versionskompatibilität auseinanderzusetzen.',
    'project.features_title': 'Funktionen',
    'project.feature_1': 'Automatische Java-Auswahl',
    'project.feature_2': 'Unterstützung für alle beliebten Mods',
    'project.feature_3': 'Betriebssystemerkennung',
    'project.feature_4': 'Mehrsprachige Benutzeroberfläche',
    'project.open_source': 'Open-Source-Projekt',
    'project.view_source': 'Code anzeigen',
    'aiDescription': 'Stellen Sie Fragen zu Java-Versionen, Minecraft-Kompatibilität oder erhalten Sie Hilfe bei der Einrichtung',
    'apiKeySetup': 'API-Schlüssel erforderlich',
    'apiKeyDescription': 'Für die Nutzung der KI-Funktionen müssen Sie einen Gemini-API-Schlüssel einrichten von',
    'startConversation': 'Starten Sie ein Gespräch mit der KI',
    'exampleQuestions': 'Fragen Sie nach Java-Versionen, Kompatibilitätsproblemen oder Einrichtungshilfe',
    'askQuestion': 'Geben Sie Ihre Frage hier ein...',
    'enterToSend': 'Drücken Sie Enter zum Senden',
    'sending': 'Senden...',
    'send': 'Senden',
    'error': 'Fehler',
    'aiError': 'Konnte keine Antwort von der KI erhalten. Bitte versuchen Sie es erneut.',
    'microphoneError': 'Konnte nicht auf das Mikrofon zugreifen. Bitte überprüfen Sie die Berechtigungen.'
  },
  pl: {
    'subtitle': 'Znajdź idealną Javę dla swojej gry',
    'tabs.main': 'Główna',
    'tabs.launchers': 'Launchery',
    'tabs.compatibility': 'Kompatybilność',
    'tabs.author': 'Autor',
    'compatibility.title': 'Tabela kompatybilności',
    'compatibility.description': 'Kompatybilność wersji Minecraft z Javą',
    'compatibility.minecraft': 'Minecraft',
    'compatibility.java': 'Java',
    'compatibility.frameworks': 'Frameworki',
    'compatibility.notes': 'Uwagi',
    'footer.made_by': 'Stworzone z',
    'footer.by': 'przez',
    'selector.title': 'Wybór Javy dla Minecraft',
    'selector.description': 'Wybierz parametry, aby uzyskać rekomendację',
    'selector.minecraft_version': 'Wersja Minecraft',
    'selector.search_version': 'Szukaj wersji...',
    'selector.select_version': 'Wybierz wersję',
    'selector.frameworks': 'Mody/Frameworki',
    'selector.operating_system': 'System operacyjny',
    'selector.get_recommendation': 'Uzyskaj rekomendację',
    'os.detected': 'Wykryty system: {{os}}. Możesz zmienić w razie potrzeby.',
    'os.warning': 'Przejście na inny system może nieznacznie zmienić wyniki rekomendacji.',
    'filters.all': 'Wszystkie',
    'filters.release': 'Wydanie',
    'filters.snapshot': 'Snapshoty',
    'filters.beta': 'Beta',
    'filters.alpha': 'Alfa',
    'frameworks.vanilla': 'Vanilla',
    'frameworks.forge': 'Forge',
    'frameworks.fabric': 'Fabric',
    'frameworks.neoforge': 'NeoForge',
    'frameworks.optifine': 'OptiFine',
    'frameworks.quilt': 'Quilt',
    'frameworks.other': 'Inne',
    'frameworks.selected': 'Wybrane kompatybilne mody: {{frameworks}}',
    'result.title': 'Rekomendacja gotowa!',
    'result.best_provider': 'Najlepszy dostawca dla Ciebie',
    'result.alternative_providers': 'Alternatywni dostawcy:',
    'result.launch_command': 'Komenda uruchamiająca',
    'result.warnings': 'Ostrzeżenia',
    'errors.fill_all_fields': 'Proszę wypełnić wszystkie pola',
    'errors.version_not_found': 'Nie znaleziono wersji',
    'success.recommendation_generated': 'Wygenerowano rekomendację!',
    'success.command_copied': 'Skopiowano komendę!',
    'loading.text': 'Ładowanie Java Selector...',
    'launchers.title': 'Launchery Minecraft',
    'launchers.coming_soon': 'Rekomendacje launcherów pojawią się tutaj wkrótce',
    'launchers.in_development': 'W trakcie rozwoju',
    'launchers.what_coming': 'Co zostanie dodane:',
    'launchers.feature_1': 'Rekomendacje oficjalnych launcherów',
    'launchers.feature_2': 'Launchery stron trzecich (MultiMC, Prism, itp.)',
    'launchers.feature_3': 'Ustawienia wydajności',
    'launchers.feature_4': 'Automatyczna instalacja modów',
    'launchers.current_message': 'Obecnie nie możemy polecić konkretnych launcherów, ale ta funkcja zostanie dodana wkrótce.',
    'author.location': 'Kamieńskie, Ukraina',
    'author.role': 'Programista Fullstack',
    'author.about': 'O mnie',
    'author.description': 'Programista z pasją do tworzenia użytecznych narzędzi. Specjalizuję się w technologiach webowych i rozwiązaniach chmurowych. Tworzę projekty, które rozwiązują rzeczywiste problemy użytkowników.',
    'author.technologies': 'Technologie',
    'author.links': 'Linki',
    'author.stats.projects': 'Projektów',
    'author.stats.languages': 'Języków',
    'author.stats.experience': 'Lat doświadczenia',
    'project.title': 'O projekcie JSF',
    'project.subtitle': 'Java Selector for Minecraft - narzędzie do wyboru optymalnej Javy',
    'project.motivation_title': 'Motywacja',
    'project.motivation': 'Uprościć proces wyboru Javy dla graczy Minecraft, eliminując potrzebę zrozumienia kompatybilności wersji.',
    'project.features_title': 'Funkcje',
    'project.feature_1': 'Automatyczny wybór Javy',
    'project.feature_2': 'Wsparcie dla wszystkich popularnych modów',
    'project.feature_3': 'Wykrywanie systemu operacyjnego',
    'project.feature_4': 'Wielojęzyczny interfejs',
    'project.open_source': 'Projekt open source',
    'project.view_source': 'Zobacz kod',
    'aiDescription': 'Zadawaj pytania o wersje Javy, kompatybilność z Minecraft lub uzyskaj pomoc w konfiguracji',
    'apiKeySetup': 'Wymagany klucz API',
    'apiKeyDescription': 'Aby korzystać z funkcji AI, musisz skonfigurować klucz API Gemini z',
    'startConversation': 'Rozpocznij rozmowę z AI',
    'exampleQuestions': 'Pytaj o wersje Javy, problemy z kompatybilnością lub pomoc w konfiguracji',
    'askQuestion': 'Wpisz swoje pytanie tutaj...',
    'enterToSend': 'Naciśnij Enter, aby wysłać',
    'sending': 'Wysyłanie...',
    'send': 'Wyślij',
    'error': 'Błąd',
    'aiError': 'Nie udało się uzyskać odpowiedzi od AI. Spróbuj ponownie.',
    'microphoneError': 'Nie udało się uzyskać dostępu do mikrofonu. Sprawdź uprawnienia.'
  }
};

export const useTranslation = () => {
  const [locale, setLocaleState] = useState<Locale>(() => {
    const saved = localStorage.getItem('jsf-locale');
    return (saved as Locale) || 'ru';
  });

  const setLocale = useCallback((newLocale: Locale) => {
    setLocaleState(newLocale);
    localStorage.setItem('jsf-locale', newLocale);
    // Force a re-render of components
    window.dispatchEvent(new CustomEvent('localeChange', { detail: newLocale }));
  }, []);

  const t = useCallback((key: string, fallback: string = '', variables: Record<string, string> = {}) => {
    const translation = translations[locale]?.[key as keyof typeof translations[typeof locale]] || fallback;
    
    // Replace variables in the format {{variable}}
    return Object.entries(variables).reduce((text, [key, value]) => {
      return text.replace(new RegExp(`{{${key}}}`, 'g'), value);
    }, translation);
  }, [locale]);

  useEffect(() => {
    const handleLocaleChange = () => {
      // Force component re-render when locale changes
    };

    window.addEventListener('localeChange', handleLocaleChange);
    return () => window.removeEventListener('localeChange', handleLocaleChange);
  }, []);

  return { locale, setLocale, t };
};
