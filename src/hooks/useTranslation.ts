import { useState, useEffect, useCallback } from 'react';

type Locale = 'en' | 'ru' | 'uk' | 'de' | 'pl';

const translations = {
  en: {
    'subtitle': 'Find the perfect Java for your game',
    'tabs.main': 'Main',
    'tabs.launchers': 'Launchers',
    'tabs.compatibility': 'Compatibility',
    'tabs.author': 'Author',
    'compatibility.title': 'Compatibility Table',
    'compatibility.description': 'Minecraft version compatibility with Java',
    'compatibility.minecraft': 'Minecraft',
    'compatibility.java': 'Java',
    'compatibility.frameworks': 'Frameworks',
    'compatibility.notes': 'Notes',
    'footer.made_by': 'Made with',
    'footer.by': 'by',
    'selector.title': 'Java Selection for Minecraft',
    'selector.description': 'Choose parameters to get a recommendation',
    'selector.minecraft_version': 'Minecraft Version',
    'selector.search_version': 'Search version...',
    'selector.select_version': 'Select version',
    'selector.frameworks': 'Mods/Frameworks',
    'selector.operating_system': 'Operating System',
    'selector.get_recommendation': 'Get Recommendation',
    'os.detected': 'Detected OS: {{os}}. You can change if needed.',
    'os.warning': 'Switching to another OS may slightly change recommendation results.',
    'filters.all': 'All',
    'filters.release': 'Release',
    'filters.snapshot': 'Snapshots',
    'filters.beta': 'Beta',
    'filters.alpha': 'Alpha',
    'frameworks.vanilla': 'Vanilla',
    'frameworks.forge': 'Forge',
    'frameworks.fabric': 'Fabric',
    'frameworks.neoforge': 'NeoForge',
    'frameworks.optifine': 'OptiFine',
    'frameworks.quilt': 'Quilt',
    'frameworks.other': 'Other',
    'frameworks.selected': 'Compatible mods selected: {{frameworks}}',
    'result.title': 'Recommendation ready!',
    'result.best_provider': 'Best provider for you',
    'result.alternative_providers': 'Alternative providers:',
    'result.launch_command': 'Launch Command',
    'result.warnings': 'Warnings',
    'errors.fill_all_fields': 'Please fill all fields',
    'errors.version_not_found': 'Version not found',
    'success.recommendation_generated': 'Recommendation generated!',
    'success.command_copied': 'Command copied!',
    'loading.text': 'Loading Java Selector...',
    'launchers.title': 'Minecraft Launchers',
    'launchers.coming_soon': 'Launcher recommendations will appear here soon',
    'launchers.in_development': 'In Development',
    'launchers.what_coming': 'What will be added:',
    'launchers.feature_1': 'Official launcher recommendations',
    'launchers.feature_2': 'Third-party launchers (MultiMC, Prism, etc.)',
    'launchers.feature_3': 'Performance settings',
    'launchers.feature_4': 'Automatic mod installation',
    'launchers.current_message': 'Currently we cannot recommend specific launchers, but this feature will be added soon.',
    'author.location': 'Kamenskoe, Ukraine',
    'author.role': 'Fullstack Developer',
    'author.about': 'About me',
    'author.description': 'Developer with a passion for creating useful tools. I specialize in web technologies and cloud solutions. I create projects that solve real user problems.',
    'author.technologies': 'Technologies',
    'author.links': 'Links',
    'author.stats.projects': 'Projects',
    'author.stats.languages': 'Languages', 
    'author.stats.experience': 'Years of Experience',
    'project.title': 'About JSF Project',
    'project.subtitle': 'Java Selector for Minecraft - a tool for selecting optimal Java',
    'project.motivation_title': 'Motivation',
    'project.motivation': 'Simplify the Java selection process for Minecraft players, eliminating the need to understand version compatibility.',
    'project.features_title': 'Features',
    'project.feature_1': 'Automatic Java selection',
    'project.feature_2': 'Support for all popular mods',
    'project.feature_3': 'Operating system detection',
    'project.feature_4': 'Multilingual interface',
    'project.open_source': 'Open source project',
    'project.view_source': 'View code'
  },
  ru: {
    'subtitle': 'Найдите идеальную Java для вашей игры',
    'tabs.main': 'Главная',
    'tabs.launchers': 'Лаунчеры',
    'tabs.compatibility': 'Совместимость',
    'tabs.author': 'Автор',
    'compatibility.title': 'Таблица совместимости',
    'compatibility.description': 'Совместимость версий Minecraft с Java',
    'compatibility.minecraft': 'Minecraft',
    'compatibility.java': 'Java',
    'compatibility.frameworks': 'Фреймворки',
    'compatibility.notes': 'Примечания',
    'footer.made_by': 'Создано с',
    'footer.by': 'от',
    'selector.title': 'Подбор Java для Minecraft',
    'selector.description': 'Выберите параметры для получения рекомендации',
    'selector.minecraft_version': 'Версия Minecraft',
    'selector.search_version': 'Поиск версии...',
    'selector.select_version': 'Выберите версию',
    'selector.frameworks': 'Моды/Фреймворки',
    'selector.operating_system': 'Операционная система',
    'selector.get_recommendation': 'Получить рекомендацию',
    'os.detected': 'Определена ОС: {{os}}. Можете изменить при необходимости.',
    'os.warning': 'Переход на другую ОС может немного изменить результаты рекомендации.',
    'filters.all': 'Все',
    'filters.release': 'Релиз',
    'filters.snapshot': 'Снапшоты',
    'filters.beta': 'Бета',
    'filters.alpha': 'Альфа',
    'frameworks.vanilla': 'Vanilla',
    'frameworks.forge': 'Forge',
    'frameworks.fabric': 'Fabric',
    'frameworks.neoforge': 'NeoForge',
    'frameworks.optifine': 'OptiFine',
    'frameworks.quilt': 'Quilt',
    'frameworks.other': 'Другое',
    'frameworks.selected': 'Выбрано совместимых модов: {{frameworks}}',
    'result.title': 'Рекомендация готова!',
    'result.best_provider': 'Лучший провайдер для вас',
    'result.alternative_providers': 'Альтернативные провайдеры:',
    'result.launch_command': 'Команда запуска',
    'result.warnings': 'Предупреждения',
    'errors.fill_all_fields': 'Пожалуйста, заполните все поля',
    'errors.version_not_found': 'Версия не найдена',
    'success.recommendation_generated': 'Рекомендация сгенерирована!',
    'success.command_copied': 'Команда скопирована!',
    'loading.text': 'Загрузка Java Selector...',
    'launchers.title': 'Лаунчеры Minecraft',
    'launchers.coming_soon': 'Скоро здесь появятся рекомендации лаунчеров',
    'launchers.in_development': 'В разработке',
    'launchers.what_coming': 'Что будет добавлено:',
    'launchers.feature_1': 'Рекомендации официальных лаунчеров',
    'launchers.feature_2': 'Сторонние лаунчеры (MultiMC, Prism, etc.)',
    'launchers.feature_3': 'Настройки производительности',
    'launchers.feature_4': 'Автоматическая установка модов',
    'launchers.current_message': 'В настоящее время мы не можем рекомендовать конкретные лаунчеры, но эта функция будет добавлена в ближайшее время.',
    'author.location': 'Каменское, Украина',
    'author.role': 'Fullstack разработчик',
    'author.about': 'Обо мне',
    'author.description': 'Разработчик с страстью к созданию полезных инструментов. Специализируюсь на веб-технологиях и облачных решениях. Создаю проекты, которые решают реальные проблемы пользователей.',
    'author.technologies': 'Технологии',
    'author.links': 'Ссылки',
    'author.stats.projects': 'Проектов',
    'author.stats.languages': 'Языков',
    'author.stats.experience': 'Лет опыта',
    'project.title': 'О проекте JSF',
    'project.subtitle': 'Java Selector for Minecraft - инструмент для подбора оптимальной Java',
    'project.motivation_title': 'Мотивация',
    'project.motivation': 'Упростить процесс выбора Java для игроков в Minecraft, избавив от необходимости разбираться в совместимости версий.',
    'project.features_title': 'Возможности',
    'project.feature_1': 'Автоматический подбор Java',
    'project.feature_2': 'Поддержка всех популярных модов',
    'project.feature_3': 'Определение операционной системы',
    'project.feature_4': 'Мультиязычный интерфейс',
    'project.open_source': 'Проект с открытым исходным кодом',
    'project.view_source': 'Посмотреть код'
  },
  uk: {
    'subtitle': 'Знайдіть ідеальну Java для вашої гри',
    'tabs.main': 'Головна',
    'tabs.launchers': 'Лаунчери',
    'tabs.compatibility': 'Сумісність',
    'tabs.author': 'Автор',
    'compatibility.title': 'Таблиця сумісності',
    'compatibility.description': 'Сумісність версій Minecraft з Java',
    'compatibility.minecraft': 'Minecraft',
    'compatibility.java': 'Java',
    'compatibility.frameworks': 'Фреймворки',
    'compatibility.notes': 'Примітки',
    'footer.made_by': 'Створено з',
    'footer.by': 'від',
    'selector.title': 'Підбір Java для Minecraft',
    'selector.description': 'Виберіть параметри для отримання рекомендації',
    'selector.minecraft_version': 'Версія Minecraft',
    'selector.search_version': 'Пошук версії...',
    'selector.select_version': 'Виберіть версію',
    'selector.frameworks': 'Моди/Фреймворки',
    'selector.operating_system': 'Операційна система',
    'selector.get_recommendation': 'Отримати рекомендацію',
    'os.detected': 'Визначено ОС: {{os}}. Можете змінити за потреби.',
    'os.warning': 'Перехід на іншу ОС може трохи змінити результати рекомендації.',
    'filters.all': 'Всі',
    'filters.release': 'Реліз',
    'filters.snapshot': 'Снапшоти',
    'filters.beta': 'Бета',
    'filters.alpha': 'Альфа',
    'frameworks.vanilla': 'Vanilla',
    'frameworks.forge': 'Forge',
    'frameworks.fabric': 'Fabric',
    'frameworks.neoforge': 'NeoForge',
    'frameworks.optifine': 'OptiFine',
    'frameworks.quilt': 'Quilt',
    'frameworks.other': 'Інше',
    'frameworks.selected': 'Вибрано сумісних модів: {{frameworks}}',
    'result.title': 'Рекомендація готова!',
    'result.best_provider': 'Найкращий провайдер для вас',
    'result.alternative_providers': 'Альтернативні провайдери:',
    'result.launch_command': 'Команда запуску',
    'result.warnings': 'Попередження',
    'errors.fill_all_fields': 'Будь ласка, заповніть всі поля',
    'errors.version_not_found': 'Версію не знайдено',
    'success.recommendation_generated': 'Рекомендацію згенеровано!',
    'success.command_copied': 'Команду скопійовано!',
    'loading.text': 'Завантаження Java Selector...',
    'launchers.title': 'Лаунчери Minecraft',
    'launchers.coming_soon': 'Незабаром тут з\'являться рекомендації лаунчерів',
    'launchers.in_development': 'У розробці',
    'launchers.what_coming': 'Що буде додано:',
    'launchers.feature_1': 'Рекомендації офіційних лаунчерів',
    'launchers.feature_2': 'Сторонні лаунчери (MultiMC, Prism, etc.)',
    'launchers.feature_3': 'Налаштування продуктивності',
    'launchers.feature_4': 'Автоматичне встановлення модів',
    'launchers.current_message': 'Наразі ми не можемо рекомендувати конкретні лаунчери, але ця функція буде додана найближчим часом.',
    'author.location': 'Кам\'янське, Україна',
    'author.role': 'Fullstack розробник',
    'author.about': 'Про мене',
    'author.description': 'Розробник із пристрастю до створення корисних інструментів. Спеціалізуюся на веб-технологіях та хмарних рішеннях. Створюю проекти, які вирішують реальні проблеми користувачів.',
    'author.technologies': 'Технології',
    'author.links': 'Посилання',
    'author.stats.projects': 'Проектів',
    'author.stats.languages': 'Мов',
    'author.stats.experience': 'Років досвіду',
    'project.title': 'Про проект JSF',
    'project.subtitle': 'Java Selector for Minecraft - інструмент для підбору оптимальної Java',
    'project.motivation_title': 'Мотивація',
    'project.motivation': 'Спростити процес вибору Java для гравців Minecraft, позбавивши від необхідності розбиратися в сумісності версій.',
    'project.features_title': 'Можливості',
    'project.feature_1': 'Автоматичний підбір Java',
    'project.feature_2': 'Підтримка всіх популярних модів',
    'project.feature_3': 'Визначення операційної системи',
    'project.feature_4': 'Багатомовний інтерфейс',
    'project.open_source': 'Проект з відкритим вихідним кодом',
    'project.view_source': 'Переглянути код'
  },
  de: {
    'subtitle': 'Finden Sie das perfekte Java für Ihr Spiel',
    'tabs.main': 'Hauptseite',
    'tabs.launchers': 'Launcher',
    'tabs.compatibility': 'Kompatibilität',
    'tabs.author': 'Autor',
    'compatibility.title': 'Kompatibilitätstabelle',
    'compatibility.description': 'Minecraft-Versionskompatibilität mit Java',
    'compatibility.minecraft': 'Minecraft',
    'compatibility.java': 'Java',
    'compatibility.frameworks': 'Frameworks',
    'compatibility.notes': 'Hinweise',
    'footer.made_by': 'Erstellt mit',
    'footer.by': 'von',
    'selector.title': 'Java-Auswahl für Minecraft',
    'selector.description': 'Wählen Sie Parameter für eine Empfehlung',
    'selector.minecraft_version': 'Minecraft-Version',
    'selector.search_version': 'Version suchen...',
    'selector.select_version': 'Version auswählen',
    'selector.frameworks': 'Mods/Frameworks',
    'selector.operating_system': 'Betriebssystem',
    'selector.get_recommendation': 'Empfehlung erhalten',
    'os.detected': 'Erkanntes OS: {{os}}. Sie können es bei Bedarf ändern.',
    'os.warning': 'Der Wechsel zu einem anderen OS kann die Empfehlungsergebnisse leicht verändern.',
    'filters.all': 'Alle',
    'filters.release': 'Release',
    'filters.snapshot': 'Snapshots',
    'filters.beta': 'Beta',
    'filters.alpha': 'Alpha',
    'frameworks.vanilla': 'Vanilla',
    'frameworks.forge': 'Forge',
    'frameworks.fabric': 'Fabric',
    'frameworks.neoforge': 'NeoForge',
    'frameworks.optifine': 'OptiFine',
    'frameworks.quilt': 'Quilt',
    'frameworks.other': 'Andere',
    'frameworks.selected': 'Kompatible Mods ausgewählt: {{frameworks}}',
    'result.title': 'Empfehlung bereit!',
    'result.best_provider': 'Bester Anbieter für Sie',
    'result.alternative_providers': 'Alternative Anbieter:',
    'result.launch_command': 'Startbefehl',
    'result.warnings': 'Warnungen',
    'errors.fill_all_fields': 'Bitte füllen Sie alle Felder aus',
    'errors.version_not_found': 'Version nicht gefunden',
    'success.recommendation_generated': 'Empfehlung generiert!',
    'success.command_copied': 'Befehl kopiert!',
    'loading.text': 'Java Selector wird geladen...',
    'launchers.title': 'Minecraft Launcher',
    'launchers.coming_soon': 'Launcher-Empfehlungen werden hier bald erscheinen',
    'launchers.in_development': 'In Entwicklung',
    'launchers.what_coming': 'Was hinzugefügt wird:',
    'launchers.feature_1': 'Empfehlungen für offizielle Launcher',
    'launchers.feature_2': 'Drittanbieter-Launcher (MultiMC, Prism, etc.)',
    'launchers.feature_3': 'Leistungseinstellungen',
    'launchers.feature_4': 'Automatische Mod-Installation',
    'launchers.current_message': 'Derzeit können wir keine spezifischen Launcher empfehlen, aber diese Funktion wird bald hinzugefügt.',
    'author.location': 'Kamenskoe, Ukraine',
    'author.role': 'Fullstack-Entwickler',
    'author.about': 'Über mich',
    'author.description': 'Entwickler mit Leidenschaft für nützliche Tools. Ich spezialisiere mich auf Webtechnologien und Cloud-Lösungen. Ich erstelle Projekte, die reale Benutzerprobleme lösen.',
    'author.technologies': 'Technologien',
    'author.links': 'Links',
    'author.stats.projects': 'Projekte',
    'author.stats.languages': 'Sprachen',
    'author.stats.experience': 'Jahre Erfahrung',
    'project.title': 'Über das JSF-Projekt',
    'project.subtitle': 'Java Selector for Minecraft - ein Tool zur Auswahl der optimalen Java',
    'project.motivation_title': 'Motivation',
    'project.motivation': 'Den Java-Auswahlprozess für Minecraft-Spieler vereinfachen und die Notwendigkeit beseitigen, Versionskompatibilität zu verstehen.',
    'project.features_title': 'Funktionen',
    'project.feature_1': 'Automatische Java-Auswahl',
    'project.feature_2': 'Unterstützung aller beliebten Mods',
    'project.feature_3': 'Betriebssystemerkennung',
    'project.feature_4': 'Mehrsprachige Benutzeroberfläche',
    'project.open_source': 'Open-Source-Projekt',
    'project.view_source': 'Code anzeigen'
  },
  pl: {
    'subtitle': 'Znajdź idealną Javę dla swojej gry',
    'tabs.main': 'Główna',
    'tabs.launchers': 'Launchery',
    'tabs.compatibility': 'Kompatybilność',
    'tabs.author': 'Autor',
    'compatibility.title': 'Tabela kompatybilności',
    'compatibility.description': 'Kompatybilność wersji Minecraft z Java',
    'compatibility.minecraft': 'Minecraft',
    'compatibility.java': 'Java',
    'compatibility.frameworks': 'Frameworki',
    'compatibility.notes': 'Uwagi',
    'footer.made_by': 'Stworzone z',
    'footer.by': 'przez',
    'selector.title': 'Wybór Java dla Minecraft',
    'selector.description': 'Wybierz parametry, aby otrzymać rekomendację',
    'selector.minecraft_version': 'Wersja Minecraft',
    'selector.search_version': 'Szukaj wersji...',
    'selector.select_version': 'Wybierz wersję',
    'selector.frameworks': 'Mody/Frameworki',
    'selector.operating_system': 'System operacyjny',
    'selector.get_recommendation': 'Otrzymaj rekomendację',
    'os.detected': 'Wykryty OS: {{os}}. Możesz zmienić w razie potrzeby.',
    'os.warning': 'Przejście na inny OS może nieznacznie zmienić wyniki rekomendacji.',
    'filters.all': 'Wszystkie',
    'filters.release': 'Wydanie',
    'filters.snapshot': 'Snapshoty',
    'filters.beta': 'Beta',
    'filters.alpha': 'Alpha',
    'frameworks.vanilla': 'Vanilla',
    'frameworks.forge': 'Forge',
    'frameworks.fabric': 'Fabric',
    'frameworks.neoforge': 'NeoForge',
    'frameworks.optifine': 'OptiFine',
    'frameworks.quilt': 'Quilt',
    'frameworks.other': 'Inne',
    'frameworks.selected': 'Wybrane kompatybilne mody: {{frameworks}}',
    'result.title': 'Rekomendacja gotowa!',
    'result.best_provider': 'Najlepszy dostawca dla Ciebie',
    'result.alternative_providers': 'Alternatywni dostawcy:',
    'result.launch_command': 'Komenda uruchomienia',
    'result.warnings': 'Ostrzeżenia',
    'errors.fill_all_fields': 'Proszę wypełnić wszystkie pola',
    'errors.version_not_found': 'Wersja nie znaleziona',
    'success.recommendation_generated': 'Rekomendacja wygenerowana!',
    'success.command_copied': 'Komenda skopiowana!',
    'loading.text': 'Ładowanie Java Selector...',
    'launchers.title': 'Launchery Minecraft',
    'launchers.coming_soon': 'Rekomendacje launcherów pojawią się tutaj wkrótce',
    'launchers.in_development': 'W opracowaniu',
    'launchers.what_coming': 'Co zostanie dodane:',
    'launchers.feature_1': 'Rekomendacje oficjalnych launcherów',
    'launchers.feature_2': 'Launchery zewnętrzne (MultiMC, Prism, etc.)',
    'launchers.feature_3': 'Ustawienia wydajności',
    'launchers.feature_4': 'Automatyczna instalacja modów',
    'launchers.current_message': 'Obecnie nie możemy polecać konkretnych launcherów, ale ta funkcja zostanie dodana wkrótce.',
    'author.location': 'Kamieńskie, Ukraina',
    'author.role': 'Fullstack Developer',
    'author.about': 'O mnie',
    'author.description': 'Programista z pasją do tworzenia przydatnych narzędzi. Specjalizuję się w technologiach webowych i rozwiązaniach chmurowych. Tworzę projekty, które rozwiązują rzeczywiste problemy użytkowników.',
    'author.technologies': 'Technologie',
    'author.links': 'Linki',
    'author.stats.projects': 'Projektów',
    'author.stats.languages': 'Języków',
    'author.stats.experience': 'Lat doświadczenia',
    'project.title': 'O projekcie JSF',
    'project.subtitle': 'Java Selector for Minecraft - narzędzie do wyboru optymalnej Java',
    'project.motivation_title': 'Motywacja',
    'project.motivation': 'Uproszczenie procesu wyboru Java dla graczy Minecraft, eliminując potrzebę rozumienia kompatybilności wersji.',
    'project.features_title': 'Funkcje',
    'project.feature_1': 'Automatyczny wybór Java',
    'project.feature_2': 'Wsparcie dla wszystkich popularnych modów',
    'project.feature_3': 'Wykrywanie systemu operacyjnego',
    'project.feature_4': 'Wielojęzyczny interfejs',
    'project.open_source': 'Projekt open source',
    'project.view_source': 'Zobacz kod'
  }
};

export const useTranslation = () => {
  const [locale, setLocaleState] = useState<Locale>(() => {
    const saved = localStorage.getItem('jsf-locale');
    return (saved as Locale) || 'ru';
  });

  const setLocale = useCallback((newLocale: Locale) => {
    setLocaleState(newLocale);
    localStorage.setItem('jsf-locale', newLocale);
    // Force a re-render of components
    window.dispatchEvent(new CustomEvent('localeChange', { detail: newLocale }));
  }, []);

  const t = useCallback((key: string, fallback: string = '', variables: Record<string, string> = {}) => {
    const translation = translations[locale]?.[key as keyof typeof translations[typeof locale]] || fallback;
    
    // Replace variables in the format {{variable}}
    return Object.entries(variables).reduce((text, [key, value]) => {
      return text.replace(new RegExp(`{{${key}}}`, 'g'), value);
    }, translation);
  }, [locale]);

  useEffect(() => {
    const handleLocaleChange = () => {
      // Force component re-render when locale changes
    };

    window.addEventListener('localeChange', handleLocaleChange);
    return () => window.removeEventListener('localeChange', handleLocaleChange);
  }, []);

  return { locale, setLocale, t };
};
